
10 REM *** AN ECOSYSTEM SIMULATION ***
11 REM BASED ON THE LOTKA-VOLTERRA EQUATIONS (SEE WIKIPEDIA)
12 REM ANTTI YLIKOSKI 05-08-2007
14 REM THIS VERSION FOR THE QB64 BY AJY 2013-03-03
16 REM ANTTI YLIKOSKI 2016-12-22 SKROLLI-LEHDELLE
20 REM THE PROGRAM SIMULATES AN ECOSYSTEM WITH M PREY ANIMALS
22 REM AND N PREDATORS.
30 REM THE PROGRAM CALCLULATES THE NUMBER OF ORGANISMS EVERY YEAR,
40 REM UNTIL ALL ORGANISMS ARE EXTINCT, ONLY PREY ORGANISMS REMAIN, OR
50 REM V YEARS HAVE ELAPSED.
60 READ A, B, C, D, M, N, V
90 PRINT "THE NUMBER OF ORGANISMS: P=PREDATORS, A=PREY ANIMALS"
92 PRINT "TIME INCREASES DOWNWARDS, EACH LINE IS ONE TIME UNIT ELAPSED"
94 PRINT "WATCH THE TYPICAL FLUCTUATIONS OF THE POPULATIONS UNFOLD"
100 FOR L% = 0 TO 4
    110 PRINT TAB(10 * L%); 10 ^ L%;
120 NEXT L%
130 PRINT TAB(50); " 100000"; TAB(60); " 1000000"
140 FOR L% = 0 TO 6
    150 PRINT TAB(10 * L%); "I";
160 NEXT L%
170 PRINT
180 FOR L% = 0 TO V
    190 IF M AND N THEN 290
    200 IF M THEN 240
    210 IF N THEN 270
    220 PRINT "++"
    230 GOTO 440
    240 PRINT "+"; TAB(INT(10 * FNL(M))); "A"
    250 IF M > 1E+07 THEN 440
    260 GOTO 340
    270 PRINT "+"; TAB(INT(10 * FNL(N))); "P"
    280 GOTO 340
    290 IF N > M THEN 320
    300 PRINT TAB(INT(10 * FNL(N))); "P"; TAB(INT(10 * FNL(M))); "A"
    310 GOTO 340
    320 PRINT TAB(INT(10 * FNL(M))); "A"; TAB(INT(10 * FNL(N))); "P"
    325 REM SIMULATE A GROUP OF TWO DIFFERENTIAL EQUATIONS WITH
    327 REM TWO DIFFERENCE EQUATIONS, 10 TIME INTERVALS
    340 FOR K% = 1 TO 10
        350 LET M = M + .1 * (A * M - B * M * N)
        360 IF M >= 1 THEN 380
        370 LET M = 0
        380 LET N = N + .1 * (C * M * N - D * N)
        390 IF N >= 1 THEN 410
        400 LET N = 0
    410 NEXT K%
    415 _DELAY 1
420 NEXT L%
430 DATA 0.7,0.004,0.002,2.0,1000,100,17
440 END
450 REM THE PARAMETER VALUES GIVEN ABOVE GIVE THE CHARACTERISTIC
460 REM FLUCTUATIONS IN THE PREY AND PREDATOR POPULATIONS THAT WILL
470 REM BE OBSERVED IN THE NATURE.
480 REM EXPERIMENT WITH TWEAKING THE VALUES OF A, B, C, AND D.

FUNCTION FNL (X): REM BASE TEN LOGARITHM
FNL = LOG(X) / LOG(10)
END FUNCTION


